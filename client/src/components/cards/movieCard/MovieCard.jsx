import React, {useContext, useState} from 'react'
import { Link } from 'react-router-dom'
import { BASE_URL } from '../../../utils/constants'
import { useMutation } from 'react-query'
import useAxiosPrivate from '../../hooks/useAxiosPrivate'
import useAuth from '../../hooks/useAuth'
import { LoginPopUpContext } from '../../context/LoginPopUpProvider'

function MovieCard({
    data,
    id,
    images,
    handleRemoveFromWatchList,
    addWathcList,
    lazyLoading,
}) {
    const [isCompleted, setIsCompleted] = useState(false)
    const IMAGE_URL = '/images/'
    const image = BASE_URL + IMAGE_URL + (images || '')
    const today = new Date()
    const targetDate = new Date(data.theatersReleaseDate)
    const WATCH_LIST_URL = '/watchLists'
    const axiosPrivate = useAxiosPrivate()
    const { setisPopupOpen } = useContext(LoginPopUpContext)
    const { auth, isAuthenticated } = useAuth()

    const postWatchListItem = useMutation({
        mutationKey: ['postWatchListItem', id],
        mutationFn: async (formData) => {
            try {
                return axiosPrivate.post(WATCH_LIST_URL, formData, {
                    headers: {
                        'Content-Type': 'application/json',
                    },
                })
            } catch (error) {
                return error
            }
        },

        onSuccess: (data) => {
            if (data?.data?.response) {
                setIsCompleted(true)
            }
        },
        onError: (error) => {},
    })

    function handleAddWatchList(e, filmId) {
        e.preventDefault()
        if (!isAuthenticated) {
            setisPopupOpen(true)
        } else {
            postWatchListItem.mutate(
                JSON.stringify({
                    film: filmId,
                    user: auth.id,
                })
            )
        }
    }

    const watchListComponent = isCompleted ? (
        <div className="flex flex-row items-center justify-center gap-1 border border-white-800 rounded-lg px-1 hover:border-white-300 hover:cursor-pointer w-full">
            <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M14.6666 8.00004C14.6666 11.6819 11.6818 14.6667 7.99992 14.6667C4.31802 14.6667 1.33325 11.6819 1.33325 8.00004C1.33325 4.31814 4.31802 1.33337 7.99992 1.33337C11.6818 1.33337 14.6666 4.31814 14.6666 8.00004ZM10.6868 5.97982C10.8821 6.17508 10.8821 6.49167 10.6868 6.68691L7.35345 10.0202C7.15819 10.2155 6.84165 10.2155 6.64637 10.0202L5.31303 8.68691C5.11777 8.49164 5.11777 8.17511 5.31303 7.97984C5.50829 7.78457 5.82488 7.78457 6.02014 7.97984L6.99992 8.95957L8.48979 7.46971L9.97972 5.97982C10.175 5.78456 10.4915 5.78456 10.6868 5.97982Z"
                    fill="#8B8B8B"
                />
            </svg>
            <p className="text-small-d-300 ">ADDED</p>
        </div>
    ) : (
        <button
            className="flex flex-row items-center justify-center gap-1 border border-white-800 rounded-lg px-1 hover:border-white-300 hover:cursor-pointer w-full"
            onClick={(e) => handleAddWatchList(e, id)}
        >
            <svg
                width="16"
                height="16"
                viewBox="0 0 14 14"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M12.7226 7.00027C12.7226 7.7519 12.5745 8.49617 12.2869 9.19059C11.9993 9.88501 11.5777 10.516 11.0462 11.0475C10.5147 11.5789 9.88373 12.0005 9.18931 12.2882C8.49489 12.5758 7.75062 12.7239 6.99898 12.7239C5.48099 12.7239 4.02517 12.1208 2.95179 11.0475C1.87841 9.97408 1.27539 8.51826 1.27539 7.00027C1.27539 5.48227 1.87841 4.02646 2.95179 2.95307C4.02517 1.87969 5.48099 1.27667 6.99898 1.27667C7.75062 1.27667 8.49489 1.42472 9.18931 1.71235C9.88373 1.99999 10.5147 2.42159 11.0462 2.95307C11.5777 3.48456 11.9993 4.11552 12.2869 4.80994C12.5745 5.50436 12.7226 6.24863 12.7226 7.00027ZM11.8492 6.9978C11.8492 6.36097 11.7238 5.73037 11.4801 5.14201C11.2364 4.55366 10.8792 4.01906 10.4289 3.56875C9.97855 3.11844 9.44395 2.76124 8.85559 2.51753C8.26724 2.27382 7.63664 2.14839 6.9998 2.14839C5.71366 2.14839 4.48019 2.65931 3.57075 3.56875C2.66131 4.47819 2.15039 5.71166 2.15039 6.9978C2.15039 8.28395 2.66131 9.51742 3.57075 10.4269C4.48019 11.3363 5.71366 11.8472 6.9998 11.8472C7.63664 11.8472 8.26724 11.7218 8.85559 11.4781C9.44395 11.2344 9.97855 10.8772 10.4289 10.4269C10.8792 9.97655 11.2364 9.44195 11.4801 8.8536C11.7238 8.26524 11.8492 7.63464 11.8492 6.9978Z"
                    fill="black"
                />
                <path
                    d="M7.43744 7.45939C7.43707 8.10616 7.43726 8.73479 7.43798 9.34529C7.43817 9.44938 7.41101 9.53961 7.3565 9.61599C7.15334 9.90064 6.72513 9.84595 6.5947 9.52794C6.57265 9.47453 6.56171 9.40936 6.56189 9.33244C6.56244 8.71793 6.56262 8.09668 6.56244 7.46869C6.56244 7.44827 6.55223 7.43797 6.53181 7.43779C5.88486 7.43706 5.26051 7.43724 4.65877 7.43833C4.5895 7.43852 4.52797 7.4274 4.4742 7.40497C4.11791 7.25705 4.10013 6.75146 4.46244 6.59779C4.52241 6.57245 4.60782 6.55996 4.71865 6.56033C5.33826 6.56324 5.94584 6.56352 6.54138 6.56115C6.5466 6.56115 6.55161 6.55907 6.5553 6.55538C6.559 6.55169 6.56107 6.54668 6.56107 6.54146C6.56453 5.98346 6.56417 5.39257 6.55998 4.76876C6.55907 4.62366 6.57192 4.5213 6.59853 4.46169C6.70599 4.22025 6.9942 4.12318 7.22279 4.26072C7.37619 4.35314 7.43908 4.50052 7.43853 4.67388C7.43671 5.32302 7.43644 5.94263 7.43771 6.53271C7.43771 6.54047 7.44079 6.54791 7.44628 6.5534C7.45177 6.55888 7.45921 6.56197 7.46697 6.56197C8.04793 6.56434 8.63819 6.56397 9.23775 6.56087C9.37757 6.56014 9.47582 6.57181 9.53252 6.59587C9.88853 6.74818 9.89072 7.24638 9.53525 7.40197C9.47819 7.42712 9.39598 7.43952 9.28861 7.43915C8.62799 7.43678 8.01795 7.43642 7.45849 7.43806C7.44446 7.43806 7.43744 7.44517 7.43744 7.45939Z"
                    fill="black"
                />
            </svg>
            <p className="text-small-d-300 ">WATCHLIST</p>
        </button>
    )

    return (
        <div className="max-w-[128px] md:max-w-[170px] min-h-[285px] md:min-h-[375px] flex flex-col items-start justify-between">
            <div className="hover:cursor-pointer group">
                <Link to={`/film/${id}`}>
                    <img
                        src={image}
                        alt="Elva dressed as a fairy"
                        loading={lazyLoading}
                        className="w-[128px] h-[168px] md:w-[170px] md:h-[258px] rounded-lg object-cover object-center group-hover:opacity-75"
                    />
                    <div className="flex flex-row items-center gap-1 mt-1">
                        <div className="flex flex-row items-center justify-start gap-1">
                            <svg
                                width="17"
                                height="17"
                                viewBox="0 0 17 17"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M16.9996 8.51056H0.913086V17.0005H16.9996V8.51056Z"
                                    fill="#F1543F"
                                />
                                <path
                                    d="M8.95908 10.0029C7.4981 10.0029 6.30322 11.1927 6.30322 12.659C6.30322 14.1253 7.49288 15.315 8.95908 15.315C10.4201 15.315 11.6149 14.1253 11.6149 12.659C11.6149 11.1927 10.4201 10.0029 8.95908 10.0029Z"
                                    fill="white"
                                />
                                <path
                                    d="M8.09326 11.0204V14.3704L10.5665 12.6954L8.09326 11.0204Z"
                                    fill="#324A5E"
                                />
                                <path
                                    d="M0.626511 2.90674L0.511719 2.98501L0.929143 5.80282L4.3155 5.29144L0.689124 2.94327L0.626511 2.90674Z"
                                    fill="#324A5E"
                                />
                                <path
                                    d="M2.92773 2.54145L6.54889 4.95224L9.38738 4.52435L5.73491 2.11877L2.92773 2.54145Z"
                                    fill="#324A5E"
                                />
                                <path
                                    d="M7.98389 1.77442L11.6259 4.18521L14.4644 3.7521L10.7806 1.35175L7.98389 1.77442Z"
                                    fill="#324A5E"
                                />
                                <path
                                    d="M16.4105 0.50116L13.0972 1.0021L16.6401 3.37637L16.7183 3.40768L16.8279 3.31897L16.4105 0.50116Z"
                                    fill="#324A5E"
                                />
                                <path
                                    d="M5.43701 2.16043L9.08948 4.56601L11.9227 4.13812L8.28072 1.73254L5.43701 2.16043Z"
                                    fill="white"
                                />
                                <path
                                    d="M0.500977 2.91196L0.527066 3.07894L4.01256 5.33841L6.84583 4.9053L3.22467 2.49451L0.500977 2.91196Z"
                                    fill="white"
                                />
                                <path
                                    d="M16.7076 3.17802L13.3943 0.955078L10.4775 1.39862L14.1613 3.79898L16.7285 3.41283L16.8015 3.39718L16.8328 3.25629L16.7076 3.17802Z"
                                    fill="white"
                                />
                                <path
                                    d="M4.12744 5.68774L4.15875 5.65643L4.12744 5.68774Z"
                                    stroke="#231F20"
                                    strokeMiterlimit="10"
                                />
                                <path
                                    d="M16.9948 5.65643L16.8696 5.60425L13.5771 8.51077H17V5.72948L16.9948 5.65643Z"
                                    fill="#324A5E"
                                />
                                <path
                                    d="M0.913086 5.58344V8.36994C0.913086 8.4169 0.939175 8.45864 0.986135 8.47952L1.0644 8.50561L4.39858 5.58865H0.913086V5.58344Z"
                                    fill="#324A5E"
                                />
                                <path
                                    d="M11.777 5.58344L8.44287 8.51083H11.3179L14.6155 5.58344H11.777Z"
                                    fill="#324A5E"
                                />
                                <path
                                    d="M6.66364 5.58344L3.30859 8.51083H6.1836L9.523 5.58344H6.66364Z"
                                    fill="#324A5E"
                                />
                                <path
                                    d="M4.08551 5.58344L0.954828 8.32819L0.913086 8.36472V8.51083H3.56895L6.97617 5.58344H4.08551Z"
                                    fill="white"
                                />
                                <path
                                    d="M14.3074 5.58344L11.0098 8.51083H13.8848L16.9998 5.75563V5.58344H14.3074Z"
                                    fill="white"
                                />
                                <path
                                    d="M9.21537 5.58344L5.87598 8.51083H8.75099L12.0852 5.58344H9.21537Z"
                                    fill="white"
                                />
                            </svg>

                            <p className="text-small-m-700 lg:text-small-d-700 group-hover:text-red-600">
                                {data.averageSuperRating
                                    ? data.averageSuperRating + '%'
                                    : '--'}
                            </p>
                        </div>
                        <div className="flex flex-row items-center justify-start gap-1">
                            <svg
                                className="w-[16px] h-[16px] lg:w-[24px] lg:h-[24px]"
                                viewBox="0 0 24 24"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M11.5307 3.26344C11.2732 2.70406 10.8318 2.42047 10.2065 2.41266C10.1902 2.41234 10.1774 2.40547 10.168 2.39203C9.71662 1.75031 8.86959 1.59 8.23068 2.04797C7.66396 2.45438 7.50646 3.20203 7.8374 3.82031C7.84552 3.835 7.84568 3.84984 7.83787 3.86484C7.6813 4.15891 7.63271 4.45672 7.69209 4.75828"
                                    stroke="#91895B"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M7.69186 4.75833C7.20061 4.47864 6.72014 4.47973 6.25046 4.76161C5.89264 4.97661 5.6778 5.32379 5.60593 5.80317C5.60249 5.82504 5.59249 5.84317 5.57593 5.85754C5.29843 6.09989 5.13577 6.44348 5.12218 6.81801C5.10374 7.33395 5.32108 7.74426 5.77421 8.04895"
                                    stroke="#918149"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M5.77441 8.04895C6.35504 12.384 6.93676 16.7155 7.51957 21.0436C7.55988 21.343 7.60348 21.5408 7.65035 21.6371C7.7991 21.944 8.02879 22.1491 8.33941 22.2525C8.46035 22.2929 8.67613 22.3135 8.98676 22.3144C9.44082 22.3157 9.89504 22.3147 10.3494 22.3116"
                                    stroke="#8A3D25"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M10.3491 22.3116L13.6294 22.3097"
                                    stroke="#8A8885"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M13.6294 22.3097C14.091 22.3141 14.5513 22.3158 15.0103 22.3149C15.3228 22.3142 15.5399 22.2919 15.6614 22.2478C15.9574 22.14 16.1777 21.9452 16.3224 21.6633C16.3777 21.5561 16.4224 21.3744 16.4564 21.1181C17.0421 16.7272 17.6286 12.3364 18.2161 7.94579C18.2258 7.87329 18.2319 7.80048 18.2344 7.72736"
                                    stroke="#8A3D25"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M18.2346 7.72739C18.6424 7.44677 18.8567 7.08427 18.8773 6.63989C18.9162 5.80973 18.2918 5.1877 17.4701 5.18817C17.452 5.18817 17.4376 5.18083 17.427 5.16614C17.2548 4.92395 17.0462 4.75427 16.8012 4.65708C16.4409 4.51395 16.0887 4.51911 15.7446 4.67255"
                                    stroke="#91895B"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M15.7443 4.67253C15.8843 4.20128 15.7954 3.76972 15.4776 3.37784C15.3992 3.28128 15.2911 3.18925 15.1532 3.10175C15.1395 3.093 15.1325 3.08034 15.1321 3.06378C15.1167 1.90597 13.814 1.26425 12.9032 1.99456C12.6336 2.2105 12.4703 2.498 12.4134 2.85706C12.4109 2.87269 12.4017 2.88112 12.3857 2.88237C12.052 2.90894 11.7668 3.03597 11.5303 3.26347"
                                    stroke="#91884F"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M15.7443 4.67255C15.4303 4.82677 15.1692 5.06958 15.0417 5.38411C15.0257 5.42317 15.007 5.46098 14.9854 5.49755C14.9832 5.50067 14.9836 5.50348 14.9864 5.50598C14.9876 5.50723 14.9886 5.50864 14.9892 5.5102C14.9917 5.51677 14.9917 5.52333 14.9892 5.52989C14.9351 5.66864 14.9198 5.80911 14.9432 5.9513"
                                    stroke="#FFF28A"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M14.9432 5.95128L14.6488 5.78722C14.6358 5.77986 14.6252 5.76883 14.6183 5.7555C14.6115 5.74216 14.6087 5.72711 14.6104 5.71222C14.6183 5.63769 14.6066 5.558 14.6062 5.48112C14.6055 5.428 14.5937 5.36597 14.5705 5.29503C14.4849 5.03565 14.3565 4.83019 14.1852 4.67862C13.9965 4.51175 13.7835 4.40144 13.5463 4.34769C13.424 4.32003 13.3049 4.33315 13.1821 4.32894C13.0896 4.32519 12.9991 4.3355 12.9107 4.35987C12.416 4.49675 12.0896 4.81644 11.9315 5.31894C11.9302 5.32233 11.9298 5.32586 11.9301 5.32925L11.9366 5.41222C11.9373 5.42065 11.9351 5.42831 11.9301 5.43519C11.896 5.48175 11.9132 5.5219 11.9816 5.55565C12.01 5.56939 12.0409 5.58333 12.074 5.59737C12.433 5.75081 12.6869 6.018 12.8357 6.39894C12.8637 6.47018 12.8821 6.54474 12.8905 6.62066C12.9099 6.79191 12.9021 6.99081 12.8671 7.21737C12.8668 7.21956 12.8658 7.21987 12.8643 7.21831C12.863 7.21706 12.8616 7.2169 12.8601 7.21784C12.8576 7.21909 12.8558 7.22112 12.8549 7.22394C12.7802 7.4705 12.6498 7.68128 12.4635 7.85628C12.4526 7.86659 12.4477 7.8794 12.449 7.89472L12.4546 7.96644"
                                    stroke="#FFEA77"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M12.4549 7.96645C12.3877 7.96114 12.3118 7.98177 12.2271 8.02833C12.1164 8.08895 12.048 8.12395 12.0218 8.13333C11.6471 8.26802 11.2747 8.24473 10.9047 8.06348C10.8694 8.0463 10.8411 8.05411 10.8199 8.08692C10.5649 8.47973 10.2099 8.69583 9.75488 8.7352"
                                    stroke="#F8F0B4"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M9.75484 8.73519C9.34641 8.748 8.99844 8.61972 8.71094 8.35034"
                                    stroke="#F8A553"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M8.71082 8.35031C8.70988 8.34125 8.70035 8.32766 8.68223 8.30953C8.49098 8.11953 8.36707 7.88016 8.31051 7.59141C8.30769 7.57797 8.29973 7.54 8.2866 7.4775C8.27379 7.41594 8.27301 7.35313 8.28426 7.28906C8.28832 7.265 8.2991 7.20672 8.3166 7.11422C8.37191 6.82172 8.51066 6.57344 8.73285 6.36938C8.74441 6.35875 8.75191 6.34562 8.75535 6.33L8.76613 6.28125"
                                    stroke="#FFEA77"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M8.76611 6.2813L9.14533 6.08958C9.18846 6.06771 9.21127 6.03271 9.21377 5.98458C9.22268 5.82568 9.19924 5.67099 9.24002 5.51583C9.27564 5.37864 9.33174 5.25083 9.4083 5.13239C9.57518 4.87396 9.80471 4.68864 10.0969 4.57646C10.1424 4.55864 10.1808 4.56989 10.2239 4.54318C10.2362 4.5355 10.2501 4.53129 10.2642 4.53099C10.4446 4.52505 10.6275 4.52677 10.8131 4.53614C10.9025 4.54052 10.9803 4.55599 11.0466 4.58255C11.1216 4.61224 11.193 4.6488 11.2608 4.69224C11.2638 4.69411 11.2672 4.69533 11.2707 4.69582C11.2742 4.69631 11.2777 4.69606 11.2811 4.69509C11.2845 4.69412 11.2877 4.69245 11.2904 4.69018C11.2931 4.68791 11.2953 4.6851 11.2969 4.68193C11.3288 4.61786 11.3719 4.55646 11.4263 4.49771C11.4366 4.48677 11.443 4.47396 11.4455 4.45927C11.4511 4.42786 11.4792 4.39833 11.4933 4.36786C11.5686 4.20224 11.6147 4.02474 11.6316 3.83536C11.6391 3.75349 11.6294 3.67693 11.6025 3.60568C11.588 3.5663 11.6016 3.52364 11.5885 3.48099C11.5666 3.41193 11.5472 3.33943 11.5303 3.26349"
                                    stroke="#FFF28A"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M10.3493 22.3116C10.1202 17.7963 9.89442 13.2806 9.67192 8.76471C9.67067 8.73939 9.69832 8.72955 9.75488 8.73518"
                                    stroke="#F1A58A"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M8.71113 8.35036C8.7102 8.35567 8.70941 8.36051 8.70879 8.36489C8.70691 8.37614 8.70129 8.38504 8.69191 8.39161C8.09566 8.81583 7.34566 8.75207 6.8502 8.21348C6.83926 8.20161 6.82582 8.19723 6.80988 8.20036C6.4502 8.27411 6.10504 8.22364 5.77441 8.04895"
                                    stroke="#F89F4D"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M18.2343 7.72736C18.0112 7.85298 17.7724 7.92095 17.5181 7.93126C17.5021 7.93189 17.4901 7.93923 17.482 7.95329C16.971 8.85376 15.6801 8.93204 15.1274 8.01845"
                                    stroke="#F8A760"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M8.76627 6.28127C8.64314 6.16721 8.50971 6.08424 8.36596 6.03236C8.35324 6.02787 8.34207 6.01983 8.33377 6.0092C8.32546 5.99857 8.32037 5.98579 8.31908 5.97236C8.30549 5.83971 8.33174 5.70518 8.29986 5.5758C8.21393 5.2283 8.01127 4.9558 7.69189 4.7583"
                                    stroke="#FFEB84"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M14.9434 5.95129C15.1996 6.14067 15.3721 6.37926 15.4609 6.66707C15.5105 6.82926 15.474 6.99707 15.4899 7.15926C15.5012 7.27145 15.4893 7.38254 15.4543 7.49254C15.3912 7.69223 15.2823 7.86754 15.1276 8.01848"
                                    stroke="#FFEB84"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M15.1276 8.01849C14.8917 8.24849 14.612 8.38287 14.2886 8.42162"
                                    stroke="#F89F4D"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M14.2883 8.42159C13.8946 8.46706 13.5299 8.35971 13.2416 8.09299C13.1997 8.05456 13.156 8.01768 13.1104 7.98237C13.0979 7.97299 13.0841 7.97002 13.0691 7.97346C12.8601 8.02315 12.6552 8.02081 12.4546 7.96643"
                                    stroke="#F8EAAE"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M13.6294 22.3097C13.8635 17.6835 14.101 13.0633 14.3419 8.44926C14.3435 8.42238 14.3256 8.41317 14.2885 8.4216"
                                    stroke="#F1A58A"
                                    strokeWidth="2"
                                />
                                <path
                                    d="M7.32064 4.19716L7.42142 3.86201C7.42642 3.84607 7.42579 3.83029 7.41954 3.81466C7.09376 3.00607 7.39423 2.1117 8.13204 1.66216C8.84407 1.22857 9.81064 1.36966 10.3516 2.02123C10.3641 2.03623 10.3802 2.04466 10.3999 2.04654C10.8911 2.0906 11.3102 2.31654 11.6224 2.69482C11.628 2.70184 11.636 2.70666 11.6449 2.70846C11.6538 2.71025 11.663 2.70891 11.6711 2.70466C11.8024 2.63404 11.9349 2.58388 12.0686 2.5542C12.0877 2.54982 12.1003 2.53841 12.1066 2.51998C12.4614 1.45966 13.7003 0.972633 14.6631 1.56466C15.1381 1.85654 15.4164 2.28935 15.498 2.8631C15.5008 2.88123 15.5091 2.89591 15.5228 2.90716C15.9188 3.23341 16.137 3.6517 16.1777 4.16201C16.1792 4.1817 16.1899 4.19138 16.2095 4.19107C16.7664 4.17795 17.233 4.37935 17.6092 4.79529C17.6213 4.80858 17.638 4.81707 17.6561 4.8192C19.0661 4.97013 19.7542 6.55263 18.8566 7.67248C18.7835 7.76341 18.6944 7.84076 18.6105 7.92045C18.5989 7.93138 18.592 7.94482 18.5899 7.96076C17.9933 12.4317 17.3997 16.8823 16.8091 21.3126C16.7252 21.9417 16.3024 22.4644 15.6883 22.6294C15.538 22.67 15.363 22.6901 15.1633 22.6898C13.0883 22.6883 10.9814 22.6876 8.84267 22.6879C8.61079 22.6879 8.42158 22.6667 8.27501 22.6242C7.81329 22.4901 7.42845 22.1353 7.26204 21.6825C7.21861 21.5637 7.17986 21.3759 7.14579 21.119C6.58017 16.8722 6.00595 12.5898 5.42314 8.27201C5.42158 8.25888 5.41564 8.24795 5.40532 8.2392C4.89439 7.80388 4.68001 7.26545 4.7622 6.62388C4.8072 6.27357 4.96486 5.95232 5.23517 5.66013C5.24298 5.65201 5.24798 5.64248 5.25017 5.63154C5.45642 4.64576 6.29876 4.04763 7.28642 4.21826C7.30392 4.22107 7.31532 4.21404 7.32064 4.19716ZM11.5305 3.26341C11.273 2.70404 10.8316 2.42045 10.2063 2.41263C10.19 2.41232 10.1772 2.40545 10.1678 2.39201C9.71642 1.75029 8.86939 1.58998 8.23048 2.04795C7.66376 2.45435 7.50626 3.20201 7.8372 3.82029C7.84533 3.83498 7.84548 3.84982 7.83767 3.86482C7.68111 4.15888 7.63251 4.4567 7.69189 4.75826C7.20064 4.47857 6.72017 4.47966 6.25048 4.76154C5.89267 4.97654 5.67782 5.32373 5.60595 5.8031C5.60251 5.82498 5.59251 5.8431 5.57595 5.85748C5.29845 6.09982 5.13579 6.44341 5.1222 6.81795C5.10376 7.33388 5.32111 7.7442 5.77423 8.04888C6.35486 12.3839 6.93658 16.7154 7.51939 21.0436C7.5597 21.3429 7.60329 21.5408 7.65017 21.637C7.79892 21.9439 8.02861 22.149 8.33923 22.2525C8.46017 22.2928 8.67595 22.3134 8.98658 22.3144C9.44064 22.3156 9.89486 22.3147 10.3492 22.3115L13.6295 22.3097C14.0911 22.314 14.5514 22.3158 15.0105 22.3148C15.323 22.3142 15.54 22.2918 15.6616 22.2478C15.9575 22.14 16.1778 21.9451 16.3225 21.6633C16.3778 21.5561 16.4225 21.3743 16.4566 21.1181C17.0422 16.7272 17.6288 12.3364 18.2163 7.94576C18.2259 7.87326 18.232 7.80045 18.2345 7.72732C18.6424 7.4467 18.8566 7.08419 18.8772 6.63982C18.9161 5.80966 18.2917 5.18763 17.47 5.1881C17.4519 5.1881 17.4375 5.18076 17.4269 5.16607C17.2547 4.92388 17.0461 4.7542 16.8011 4.65701C16.4408 4.51388 16.0886 4.51904 15.7445 4.67248C15.8845 4.20123 15.7956 3.76966 15.4778 3.37779C15.3994 3.28123 15.2913 3.1892 15.1534 3.1017C15.1397 3.09295 15.1327 3.08029 15.1324 3.06373C15.1169 1.90591 13.8142 1.2642 12.9034 1.99451C12.6338 2.21045 12.4705 2.49795 12.4136 2.85701C12.4111 2.87263 12.4019 2.88107 12.386 2.88232C12.0522 2.90888 11.767 3.03591 11.5305 3.26341Z"
                                    fill="#231F20"
                                />
                                <path
                                    d="M15.7444 4.67253C15.4304 4.82675 15.1693 5.06956 15.0418 5.38409C15.0258 5.42315 15.0071 5.46097 14.9855 5.49753C14.9833 5.50065 14.9836 5.50347 14.9864 5.50597C14.9877 5.50722 14.9886 5.50862 14.9893 5.51019C14.9918 5.51675 14.9918 5.52331 14.9893 5.52987C14.9352 5.66862 14.9199 5.80909 14.9433 5.95128L14.6489 5.78722C14.6359 5.77986 14.6253 5.76883 14.6185 5.7555C14.6116 5.74216 14.6089 5.72711 14.6105 5.71222C14.6185 5.63769 14.6068 5.558 14.6063 5.48112C14.6057 5.428 14.5938 5.36597 14.5707 5.29503C14.485 5.03565 14.3566 4.83019 14.1854 4.67862C13.9966 4.51175 13.7836 4.40144 13.5464 4.34769C13.4241 4.32003 13.305 4.33315 13.1822 4.32894C13.0897 4.32519 12.9993 4.3355 12.9108 4.35987C12.4161 4.49675 12.0897 4.81644 11.9316 5.31894C11.9304 5.32233 11.9299 5.32586 11.9302 5.32925L11.9368 5.41222C11.9374 5.42065 11.9352 5.42831 11.9302 5.43519C11.8961 5.48175 11.9133 5.5219 11.9818 5.55565C12.0102 5.56939 12.041 5.58333 12.0741 5.59737C12.4332 5.75081 12.6871 6.018 12.8358 6.39894C12.8638 6.47018 12.8823 6.54474 12.8907 6.62065C12.91 6.7919 12.9022 6.99081 12.8672 7.21737C12.8669 7.21956 12.866 7.21987 12.8644 7.21831C12.8632 7.21706 12.8618 7.2169 12.8602 7.21784C12.8577 7.21909 12.856 7.22112 12.855 7.22394C12.7804 7.4705 12.6499 7.68128 12.4636 7.85628C12.4527 7.86659 12.4479 7.8794 12.4491 7.89472L12.4547 7.96644C12.3875 7.96112 12.3116 7.98175 12.2269 8.02831C12.1163 8.08894 12.0479 8.12394 12.0216 8.13331C11.6469 8.268 11.2746 8.24472 10.9046 8.06347C10.8693 8.04628 10.841 8.05409 10.8197 8.0869C10.5647 8.47972 10.2097 8.69581 9.75473 8.73519C9.34629 8.748 8.99832 8.61972 8.71082 8.35034C8.70988 8.34128 8.70035 8.32769 8.68223 8.30956C8.49098 8.11956 8.36707 7.88019 8.31051 7.59144C8.30769 7.578 8.29973 7.54003 8.2866 7.47753C8.27379 7.41597 8.27301 7.35315 8.28426 7.28909C8.28832 7.26503 8.2991 7.20675 8.3166 7.11425C8.37191 6.82175 8.51066 6.57347 8.73285 6.3694C8.74441 6.35878 8.75191 6.34565 8.75535 6.33003L8.76613 6.28128L9.14535 6.08956C9.18848 6.06769 9.21129 6.03269 9.21379 5.98456C9.22269 5.82565 9.19926 5.67097 9.24004 5.51581C9.27566 5.37862 9.33176 5.25081 9.40832 5.13237C9.57519 4.87394 9.80473 4.68862 10.0969 4.57644C10.1424 4.55862 10.1808 4.56987 10.2239 4.54315C10.2362 4.53548 10.2501 4.53127 10.2643 4.53097C10.4446 4.52503 10.6275 4.52675 10.8132 4.53612C10.9025 4.5405 10.9804 4.55597 11.0466 4.58253C11.1216 4.61222 11.193 4.64878 11.2608 4.69222C11.2638 4.69409 11.2672 4.69531 11.2707 4.6958C11.2742 4.69629 11.2778 4.69604 11.2812 4.69507C11.2846 4.6941 11.2877 4.69242 11.2904 4.69016C11.2931 4.68789 11.2954 4.68508 11.2969 4.6819C11.3288 4.61784 11.3719 4.55644 11.4263 4.49769C11.4366 4.48675 11.443 4.47394 11.4455 4.45925C11.4511 4.42784 11.4793 4.39831 11.4933 4.36784C11.5686 4.20222 11.6147 4.02472 11.6316 3.83534C11.6391 3.75347 11.6294 3.6769 11.6025 3.60565C11.588 3.56628 11.6016 3.52362 11.5885 3.48097C11.5666 3.4119 11.5472 3.3394 11.5304 3.26347C11.7669 3.03597 12.0521 2.90894 12.3858 2.88237C12.4018 2.88112 12.411 2.87269 12.4135 2.85706C12.4704 2.498 12.6336 2.2105 12.9033 1.99456C13.8141 1.26425 15.1168 1.90597 15.1322 3.06378C15.1325 3.08034 15.1396 3.093 15.1533 3.10175C15.2911 3.18925 15.3993 3.28128 15.4777 3.37784C15.7955 3.76972 15.8844 4.20128 15.7444 4.67253Z"
                                    fill="#FFF07D"
                                />
                                <path
                                    d="M11.5302 3.26344C11.5471 3.33938 11.5664 3.41188 11.5883 3.48094C11.6014 3.52359 11.5878 3.56625 11.6024 3.60563C11.6293 3.67688 11.6389 3.75344 11.6314 3.83531C11.6146 4.02469 11.5685 4.20219 11.4932 4.36781C11.4791 4.39828 11.451 4.42781 11.4453 4.45922C11.4428 4.47391 11.4364 4.48672 11.4261 4.49766C11.3718 4.55641 11.3286 4.61781 11.2968 4.68188C11.2952 4.68505 11.293 4.68786 11.2903 4.69013C11.2876 4.6924 11.2844 4.69407 11.281 4.69504C11.2776 4.69601 11.274 4.69626 11.2705 4.69577C11.267 4.69528 11.2637 4.69406 11.2607 4.69219C11.1928 4.64875 11.1214 4.61219 11.0464 4.5825C10.9802 4.55594 10.9024 4.54047 10.813 4.53609C10.6274 4.52672 10.4444 4.525 10.2641 4.53094C10.25 4.53124 10.2361 4.53545 10.2238 4.54313C10.1807 4.56984 10.1422 4.55859 10.0968 4.57641C9.80457 4.68859 9.57504 4.87391 9.40816 5.13234C9.3316 5.25078 9.2755 5.37859 9.23988 5.51578C9.1991 5.67094 9.22253 5.82563 9.21363 5.98453C9.21113 6.03266 9.18832 6.06766 9.14519 6.08953L8.76597 6.28125C8.64285 6.16719 8.50941 6.08422 8.36566 6.03234C8.35294 6.02785 8.34177 6.01981 8.33347 6.00918C8.32516 5.99855 8.32007 5.98577 8.31878 5.97234C8.30519 5.83969 8.33144 5.70516 8.29957 5.57578C8.21363 5.22828 8.01097 4.95578 7.6916 4.75828C7.63222 4.45672 7.68082 4.15891 7.83738 3.86484C7.84519 3.84984 7.84504 3.835 7.83691 3.82031C7.50597 3.20203 7.66347 2.45438 8.23019 2.04797C8.8691 1.59 9.71613 1.75031 10.1675 2.39203C10.1769 2.40547 10.1897 2.41234 10.206 2.41266C10.8313 2.42047 11.2727 2.70406 11.5302 3.26344Z"
                                    fill="#FFF396"
                                />
                                <path
                                    d="M14.9432 5.95128C15.1994 6.14065 15.3719 6.37925 15.4607 6.66706C15.5104 6.82925 15.4738 6.99706 15.4898 7.15925C15.501 7.27144 15.4891 7.38253 15.4541 7.49253C15.391 7.69222 15.2821 7.86753 15.1274 8.01847C14.8915 8.24847 14.6118 8.38284 14.2883 8.42159C13.8946 8.46706 13.5299 8.35972 13.2416 8.093C13.1998 8.05456 13.156 8.01769 13.1104 7.98237C13.0979 7.973 13.0841 7.97003 13.0691 7.97347C12.8601 8.02316 12.6552 8.02081 12.4546 7.96644L12.449 7.89472C12.4477 7.8794 12.4526 7.86659 12.4635 7.85628C12.6498 7.68128 12.7802 7.4705 12.8549 7.22394C12.8558 7.22112 12.8576 7.21909 12.8601 7.21784C12.8616 7.2169 12.863 7.21706 12.8643 7.21831C12.8658 7.21987 12.8668 7.21956 12.8671 7.21737C12.9021 6.99081 12.9099 6.79191 12.8905 6.62066C12.8821 6.54474 12.8637 6.47018 12.8357 6.39894C12.6869 6.018 12.433 5.75081 12.074 5.59737C12.0409 5.58333 12.01 5.56939 11.9816 5.55565C11.9132 5.5219 11.896 5.48175 11.9301 5.43519C11.9351 5.42831 11.9373 5.42065 11.9366 5.41222L11.9301 5.32925C11.9298 5.32586 11.9302 5.32233 11.9315 5.31894C12.0896 4.81644 12.416 4.49675 12.9107 4.35987C12.9991 4.3355 13.0896 4.32519 13.1821 4.32894C13.3049 4.33315 13.424 4.32003 13.5463 4.34769C13.7835 4.40144 13.9965 4.51175 14.1852 4.67862C14.3565 4.83019 14.4849 5.03565 14.5705 5.29503C14.5937 5.36597 14.6055 5.428 14.6062 5.48112C14.6066 5.558 14.6183 5.63769 14.6104 5.71222C14.6087 5.72711 14.6115 5.74216 14.6183 5.7555C14.6252 5.76883 14.6358 5.77986 14.6488 5.78722L14.9432 5.95128Z"
                                    fill="#FFE371"
                                />
                                <path
                                    d="M7.69186 4.75826C8.01124 4.95576 8.21389 5.22826 8.29983 5.57576C8.33171 5.70514 8.30546 5.83967 8.31905 5.97233C8.32033 5.98576 8.32543 5.99854 8.33373 6.00917C8.34204 6.0198 8.35321 6.02783 8.36593 6.03233C8.50968 6.0842 8.64311 6.16717 8.76624 6.28123L8.75546 6.32998C8.75202 6.34561 8.74452 6.35873 8.73296 6.36936C8.51077 6.57342 8.37202 6.8217 8.31671 7.1142C8.29921 7.2067 8.28843 7.26498 8.28436 7.28905C8.27311 7.35311 8.27389 7.41592 8.28671 7.47748C8.29983 7.53998 8.3078 7.57795 8.31061 7.59139C8.36718 7.88014 8.49108 8.11951 8.68233 8.30951C8.70046 8.32764 8.70999 8.34123 8.71093 8.3503C8.70999 8.35561 8.70921 8.36045 8.70858 8.36483C8.70671 8.37608 8.70108 8.38498 8.69171 8.39155C8.09546 8.81576 7.34546 8.75201 6.84999 8.21342C6.83905 8.20155 6.82561 8.19717 6.80968 8.2003C6.44999 8.27405 6.10483 8.22358 5.77421 8.04889C5.32108 7.7442 5.10374 7.33389 5.12218 6.81795C5.13577 6.44342 5.29843 6.09983 5.57593 5.85748C5.59249 5.84311 5.60249 5.82498 5.60593 5.80311C5.6778 5.32373 5.89264 4.97655 6.25046 4.76155C6.72014 4.47967 7.20061 4.47858 7.69186 4.75826Z"
                                    fill="#FFE371"
                                />
                                <path
                                    d="M18.2343 7.72733C18.0112 7.85295 17.7725 7.92092 17.5181 7.93124C17.5022 7.93186 17.4901 7.9392 17.482 7.95327C16.9711 8.85374 15.6801 8.93202 15.1275 8.01842C15.2822 7.86749 15.3911 7.69217 15.4542 7.49249C15.4892 7.38249 15.5011 7.27139 15.4898 7.1592C15.4739 6.99702 15.5104 6.8292 15.4607 6.66702C15.372 6.3792 15.1995 6.14061 14.9432 5.95124C14.9198 5.80905 14.9351 5.66858 14.9892 5.52983C14.9917 5.52327 14.9917 5.5167 14.9892 5.51014C14.9886 5.50858 14.9876 5.50717 14.9864 5.50592C14.9836 5.50342 14.9832 5.50061 14.9854 5.49749C15.007 5.46092 15.0257 5.42311 15.0417 5.38405C15.1692 5.06952 15.4303 4.8267 15.7443 4.67249C16.0884 4.51905 16.4406 4.51389 16.8009 4.65702C17.0459 4.7542 17.2545 4.92389 17.4267 5.16608C17.4373 5.18077 17.4517 5.18811 17.4698 5.18811C18.2915 5.18764 18.9159 5.80967 18.877 6.63983C18.8564 7.0842 18.6422 7.4467 18.2343 7.72733Z"
                                    fill="#FFF396"
                                />
                                <path
                                    d="M18.2344 7.72736C18.2319 7.80048 18.2258 7.87329 18.2161 7.94579C17.6286 12.3364 17.0421 16.7272 16.4564 21.1181C16.4224 21.3744 16.3777 21.5561 16.3224 21.6633C16.1777 21.9452 15.9574 22.14 15.6614 22.2478C15.5399 22.2919 15.3228 22.3142 15.0103 22.3149C14.5513 22.3158 14.091 22.3141 13.6294 22.3097C13.8635 17.6834 14.101 13.0633 14.3419 8.44923C14.3435 8.42236 14.3256 8.41314 14.2885 8.42157C14.6119 8.38282 14.8916 8.24845 15.1275 8.01845C15.6802 8.93204 16.9711 8.85376 17.4821 7.95329C17.4902 7.93923 17.5022 7.93189 17.5181 7.93126C17.7725 7.92095 18.0113 7.85298 18.2344 7.72736Z"
                                    fill="#F05A29"
                                />
                                <path
                                    d="M12.4549 7.96639C12.6555 8.02077 12.8604 8.02311 13.0694 7.97342C13.0844 7.96999 13.0982 7.97295 13.1107 7.98233C13.1563 8.01764 13.2 8.05452 13.2419 8.09295C13.5302 8.35967 13.8949 8.46702 14.2886 8.42155C14.3258 8.41311 14.3436 8.42233 14.3421 8.4492C14.1011 13.0633 13.8636 17.6834 13.6296 22.3097L10.3493 22.3115C10.1202 17.7962 9.89442 13.2806 9.67192 8.76467C9.67067 8.73936 9.69832 8.72952 9.75488 8.73514C10.2099 8.69577 10.5649 8.47967 10.8199 8.08686C10.8411 8.05405 10.8694 8.04624 10.9047 8.06342C11.2747 8.24467 11.6471 8.26795 12.0218 8.13327C12.048 8.12389 12.1164 8.08889 12.2271 8.02827C12.3118 7.98171 12.3877 7.96108 12.4549 7.96639Z"
                                    fill="#F1F0EA"
                                />
                                <path
                                    d="M5.77393 8.04889C6.10455 8.22358 6.44971 8.27405 6.80939 8.2003C6.82533 8.19717 6.83877 8.20155 6.84971 8.21342C7.34518 8.75201 8.09518 8.81576 8.69143 8.39155C8.7008 8.38498 8.70643 8.37608 8.7083 8.36483C8.70893 8.36045 8.70971 8.35561 8.71064 8.3503C8.99814 8.61967 9.34611 8.74795 9.75455 8.73514C9.69799 8.72951 9.67033 8.73936 9.67158 8.76467C9.89408 13.2806 10.1199 17.7962 10.3489 22.3115C9.89455 22.3147 9.44033 22.3156 8.98627 22.3144C8.67564 22.3134 8.45986 22.2928 8.33893 22.2525C8.0283 22.149 7.79861 21.9439 7.64986 21.637C7.60299 21.5408 7.55939 21.343 7.51908 21.0436C6.93627 16.7155 6.35455 12.3839 5.77393 8.04889Z"
                                    fill="#F05A29"
                                />
                            </svg>
                            <p className="text-small-m-700 lg:text-small-d-700 group-hover:text-red-600">
                                {data.averageUserRating
                                    ? data.averageUserRating + '%'
                                    : '--'}
                            </p>
                        </div>
                    </div>
                    <p className="text-tiny-m-400 lg:text-tiny-d-400 group-hover:text-red-600 overflow-hidden text-ellipsis line-clamp-2 break-words mt-[4px]">
                        {data.tittle}
                    </p>
                    <p className="h-[19.19px] text-tiny-m-400 lg:text-tiny-d-400 group-hover:text-red-600">
                        {targetDate > today
                            ? `Opens: ${targetDate.toLocaleDateString()}`
                            : ''}
                    </p>
                </Link>
            </div>
            {addWathcList ? watchListComponent : ''}
            {handleRemoveFromWatchList ? (
                <button
                    className="flex flex-row items-center justify-center gap-1 border border-white-800 rounded-lg px-1 hover:border-white-300 hover:cursor-pointer w-full"
                    onClick={(e) => handleRemoveFromWatchList(e, id)}
                >
                    <svg
                        width="16"
                        height="16"
                        viewBox="0 0 16 16"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M14 7.5C14 8.35359 13.8319 9.19883 13.5052 9.98744C13.1786 10.7761 12.6998 11.4926 12.0962 12.0962C11.4926 12.6998 10.7761 13.1786 9.98744 13.5052C9.19883 13.8319 8.35359 14 7.5 14C5.77609 14 4.12279 13.3152 2.90381 12.0962C1.68482 10.8772 1 9.22391 1 7.5C1 5.77609 1.68482 4.12279 2.90381 2.90381C4.12279 1.68482 5.77609 1 7.5 1C8.35359 1 9.19883 1.16813 9.98744 1.49478C10.7761 1.82144 11.4926 2.30023 12.0962 2.90381C12.6998 3.50739 13.1786 4.22394 13.5052 5.01256C13.8319 5.80117 14 6.64641 14 7.5ZM13.0082 7.49721C13.0082 6.77398 12.8657 6.05785 12.589 5.38968C12.3122 4.72151 11.9065 4.11439 11.3951 3.603C10.8837 3.09161 10.2766 2.68595 9.60846 2.40918C8.94029 2.13242 8.22415 1.98997 7.50093 1.98997C6.04032 1.98997 4.63953 2.57019 3.60673 3.603C2.57392 4.63581 1.99369 6.03659 1.99369 7.49721C1.99369 8.95782 2.57392 10.3586 3.60673 11.3914C4.63953 12.4242 6.04032 13.0044 7.50093 13.0044C8.22415 13.0044 8.94029 12.862 9.60846 12.5852C10.2766 12.3085 10.8837 11.9028 11.3951 11.3914C11.9065 10.88 12.3122 10.2729 12.589 9.60473C12.8657 8.93657 13.0082 8.22043 13.0082 7.49721Z"
                            fill="black"
                        />
                        <line x1="4" y1="7.5" x2="11" y2="7.5" stroke="black" />
                    </svg>

                    <p className="text-small-d-300 ">REMOVE</p>
                </button>
            ) : (
                ''
            )}
        </div>
    )
}




export default MovieCard